@@title: 稍微加快实验室网速
@@date: 2016-06-18

## 背景

我在当年考研, 听说暨大网速好,就报了.结果网速真的很快, 除了实验室 
update: 极路由下个VPN插件就能搭VPN服务器了
update: 然后最近快得不行, 不知道哪位大爷放过了我们

<!-- more -->

## 分析

首先考虑是不是实验室路由器到上级路由出口带宽太小. 这个好解决, 找个人少的时间重置了实验室路由器, 重新配置了qos, 然后在高峰时段在路由器后台监控流量......嗯, 峰值200k.

那很有可能是公网出口带宽太小----分配到实验室路由器的公网带宽太小. 哪里可以拿到额外的公网带宽? 宿舍. 如果可以在宿舍建一个代理服务器, 然后从实验室连接到宿舍, 通过宿舍的公网带宽连公网的话, 速度无疑会快很多.

## 方案

由于直接在路由器上做文章限制很多, 最有效可行的方案就是用ssh转发, 然后用proxifier对系统进行全局代理 (ubuntu可以直接设置)
ps:当然你也可以放台电脑在宿舍, 然后在windows下面建一个http服务器, 那更简单也更稳定, 毕竟有官方支持的客户端, 网上建http服务器的教程很多,可以去搜索下

## 干活

###ping
首先在实验室ping宿舍ip, 可以ping通, ping值1ms

###准备路由器
我用极路由, 其他openwrt路由器也可以, mentohust老习惯性掉线, 本想写脚本通过ping来判断掉线, 然后自动掉线重连, 但是觉得这完全没有必要, 直接半小时重启一次mentohust即可

###自动重启mentohust
用putty连接路由器
输入
```
vi /etc/cront/root
```
在最后加入
```
*/30 * * * * mentohust -k
*/30 * * * * mentohust
```
这个脚本的意思是每半个关闭mentohust, 然后启动mentohust

###端口转发
极路由可以去下一个叫超级端口转发的插件, 然后dmz自己路由器的地址, 极路由是192.168.199.1, 其他路由自行想办法dmz

###用putty生成socks5
###用proxifier全局代理
嗯....网上一堆, 我就不写了

TODO
---
###全局代理后shadowsocks连不上了!
在路由器上搭好梯子, 然后弄出socks5, 自己远程连接

###安全性问题呢? 路由器不是暴露到公网上了?
嗯. 暨大是文科学校, 信科院也搬到南校区去了,我在本校. 按理说我毕业前都不会是个问题.   XD

